import{a as D,b as _}from"./chunk-MJU3WAKM.js";import{g as Z,o as O}from"./chunk-TMI2L7TV.js";import{c as V}from"./chunk-DFB7EGM7.js";import{g as B,k as A,l as q,n as $,o as G,s as R}from"./chunk-DERFXW54.js";import{d as i,h as F,k as S,m as E,r as M,s as P,t as T}from"./chunk-HBLQJYI7.js";import{f as k,g as x}from"./chunk-ACJFTGJR.js";import"./chunk-VB5AKFTQ.js";import{h as v,i as g}from"./chunk-DYBTKUOF.js";import"./chunk-XXPNPBJG.js";import{a as H}from"./chunk-VQRAC7UO.js";import{a}from"./chunk-AUOK72YZ.js";import"./chunk-4ZDK5ED3.js";import{I,P as z,Q as f,h as b,r as C,t as N}from"./chunk-GAFZRVCH.js";import{Eb as h,O as y,Sb as o,bc as p,cc as c,dc as s,lc as d,sa as n,sb as m,wc as l}from"./chunk-32QSKDGA.js";var Ce=(()=>{class u{constructor(){this.formBuilder=n(M),this.store=n(I),this.actions$=n(z),this.router=n(N),this.route=n(C),this.companyId=null,this.dialog=n(D)}ngOnInit(){this.initializeForms(),this.routeSubscription=this.route.paramMap.subscribe(e=>{this.companyId=e.get("companyId")}),this.store.dispatch(a.loadByIid({iid:this.companyId})),this.company$=this.store.select(H),this.companySubscription=this.company$.subscribe(e=>{e&&this.editCompanyForm.patchValue({companyName:e.companyName,companyTaxNumber:e.companyTaxNumber,companyCountry:e.companyCountry,companyProvince:e.companyProvince,companyPostalCode:e.companyPostalCode,companySettlement:e.companySettlement,companyStreet:e.companyStreet,companyStreetNumber:e.companyStreetNumber,companyEmail:e.companyEmail,companyPhoneNumber:e.companyPhoneNumber})})}initializeForms(){this.editCompanyForm=this.formBuilder.group({companyName:["",[i.required,i.pattern(/^[A-ZÄÁÉÚŐÓÜÖÍ][a-zäáéúőóüöíß]*(-[A-ZÄÁÉÚŐÓÜÖÍ][a-zäáéúőóüöíß]*)*( [A-ZÄÁÉÚŐÓÜÖÍ][a-zäáéúőóüöíß]*(-[A-ZÄÁÉÚŐÓÜÖÍ][a-zäáéúőóüöíß]*)*)*( (Kft\.|GmbH))?$/)]],companyTaxNumber:["",[i.required]],companyCountry:["",[i.required]],companyProvince:[""],companyPostalCode:["",[i.required]],companySettlement:["",[i.required]],companyStreet:["",[i.required]],companyStreetNumber:["",[i.required]],companyEmail:[""],companyPhoneNumber:[""]})}get companyName(){return this.editCompanyForm.get("companyName")}get companyTaxNumber(){return this.editCompanyForm.get("companyTaxNumber")}get companyCountry(){return this.editCompanyForm.get("companyCountry")}get companyProvince(){return this.editCompanyForm.get("companyProvince")}get companyPostalCode(){return this.editCompanyForm.get("companyPostalCode")}get companySettlement(){return this.editCompanyForm.get("companySettlement")}get companyStreet(){return this.editCompanyForm.get("companyStreet")}get companyStreetNumber(){return this.editCompanyForm.get("companyStreetNumber")}get companyEmail(){return this.editCompanyForm.get("companyEmail")}get companyPhoneNumber(){return this.editCompanyForm.get("companyPhoneNumber")}submitForm(){if(this.editCompanyForm.valid){let e={companyName:this.companyName.value,companyTaxNumber:this.companyTaxNumber.value,companyCountry:this.companyCountry.value,companyProvince:this.companyProvince.value,companyPostalCode:this.companyPostalCode.value,companySettlement:this.companySettlement.value,companyStreet:this.companyStreet.value,companyStreetNumber:this.companyStreetNumber.value,companyEmail:this.companyEmail.value,companyPhoneNumber:this.companyPhoneNumber.value};this.store.dispatch(a.edit({companyToEdit:e,companyIid:this.companyId})),this.actions$.pipe(f(a.editSuccess),y(1)).subscribe(r=>{this.router.navigate([`/company/${r.editedCompany.internalId}`])})}}onCompanyDelete(){if(!this.companyId)return;this.dialog.open(_).afterClosed().subscribe(r=>{r&&(this.store.dispatch(a.deleteByIid({companyIid:this.companyId})),this.actions$.pipe(f(a.deleteByIidSuccess),y(1)).subscribe(()=>{this.router.navigate(["/"])}))})}ngOnDestroy(){this.routeSubscription&&this.routeSubscription.unsubscribe(),this.companySubscription&&this.companySubscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||u)}}static{this.\u0275cmp=h({type:u,selectors:[["app-edit-company"]],decls:21,vars:12,consts:[[3,"formGroup"],[1,"form-container"],[1,"first-first-container"],["nz-icon","","nzType","delete","nzTheme","outline",2,"color","red",3,"click"],["label","C\xE9gn\xE9v","controlName","companyName",3,"form"],["label","Ad\xF3sz\xE1m","controlName","companyTaxNumber",3,"form"],["label","Orsz\xE1g","controlName","companyCountry",3,"form"],["label","Megye/Tartom\xE1ny","controlName","companyProvince",3,"form"],["label","Ir\xE1ny\xEDt\xF3sz\xE1m","controlName","companyPostalCode",3,"form"],["label","Telep\xFCl\xE9s","controlName","companySettlement",3,"form"],["label","Utca","controlName","companyStreet",3,"form"],["label","H\xE1zsz\xE1m","controlName","companyStreetNumber",3,"form"],["label","E-mail","controlName","companyEmail",3,"form"],["label","Telefonsz\xE1m","controlName","companyPhoneNumber",3,"form"],[1,"bottom-submit-container"],["mat-raised-button","","color","primary","type","submit",3,"click","disabled"]],template:function(r,t){r&1&&(p(0,"form",0)(1,"div",1)(2,"div",2)(3,"h3"),l(4,"F\u0151bb adatok "),p(5,"span",3),d("click",function(){return t.onCompanyDelete()}),c()(),s(6,"app-input-text-field",4)(7,"app-input-text-field",5),p(8,"h3"),l(9,"Sz\xE9khely"),c(),s(10,"app-input-text-field",6)(11,"app-input-text-field",7)(12,"app-input-text-field",8)(13,"app-input-text-field",9)(14,"app-input-text-field",10)(15,"app-input-text-field",11)(16,"app-input-text-field",12)(17,"app-input-text-field",13),c(),p(18,"div",14)(19,"button",15),d("click",function(){return t.submitForm()}),l(20," C\xE9g m\xF3dos\xEDt\xE1sa "),c()()()()),r&2&&(o("formGroup",t.editCompanyForm),m(6),o("form",t.editCompanyForm),m(),o("form",t.editCompanyForm),m(3),o("form",t.editCompanyForm),m(),o("form",t.editCompanyForm),m(),o("form",t.editCompanyForm),m(),o("form",t.editCompanyForm),m(),o("form",t.editCompanyForm),m(),o("form",t.editCompanyForm),m(),o("form",t.editCompanyForm),m(),o("form",t.editCompanyForm),m(2),o("disabled",t.editCompanyForm.invalid))},dependencies:[b,B,P,S,F,T,E,A,q,$,G,x,k,R,Z,O,V,g,v],encapsulation:2})}}return u})();export{Ce as EditCompanyComponent};
