import{a as r}from"./chunk-DLNFDK47.js";import{a as q}from"./chunk-3ESK2XNE.js";import{a as D,b as B}from"./chunk-MJU3WAKM.js";import{g as k,k as L,l as $,n as G,o as A,s as V}from"./chunk-DERFXW54.js";import{d as b,h as v,k as y,m as I,r as E,s as N,t as S}from"./chunk-HBLQJYI7.js";import{f as T,g as _}from"./chunk-ACJFTGJR.js";import"./chunk-VB5AKFTQ.js";import{h as R,i as M}from"./chunk-DYBTKUOF.js";import"./chunk-XXPNPBJG.js";import"./chunk-4ZDK5ED3.js";import{I as C,P as z,Q as c,h as P,r as F,t as g}from"./chunk-GAFZRVCH.js";import{Eb as f,O as m,Sb as t,bc as p,cc as a,dc as h,lc as d,sa as i,sb as l,wc as u}from"./chunk-32QSKDGA.js";var ue=(()=>{class n{constructor(){this.formBuilder=i(E),this.store=i(C),this.actions$=i(z),this.router=i(g),this.route=i(F),this.responsiblePersonId=null,this.dialog=i(D)}ngOnInit(){this.initializeForms(),this.routeSubscription=this.route.paramMap.subscribe(e=>{this.responsiblePersonId=e.get("responsiblePersonId")}),this.store.dispatch(r.loadByIid({iid:this.responsiblePersonId})),this.responsiblePerson$=this.store.select(q),this.responsiblePersonSubscription=this.responsiblePerson$.subscribe(e=>{e&&this.editResponsiblePersonForm.patchValue({responsiblePersonName:e.responsiblePersonName,responsiblePersonLicense:e.responsiblePersonLicense})})}initializeForms(){this.editResponsiblePersonForm=this.formBuilder.group({responsiblePersonName:["",[b.required]],responsiblePersonLicense:["",[b.required]]})}get responsiblePersonName(){return this.editResponsiblePersonForm.get("responsiblePersonName")}get responsiblePersonLicense(){return this.editResponsiblePersonForm.get("responsiblePersonLicense")}submitForm(){if(this.editResponsiblePersonForm.valid){let e={responsiblePersonName:this.responsiblePersonName.value,responsiblePersonLicense:this.responsiblePersonLicense.value};this.store.dispatch(r.edit({responsiblePersonToEdit:e,responsiblePersonIid:this.responsiblePersonId})),this.actions$.pipe(c(r.editSuccess),m(1)).subscribe(o=>{this.router.navigate([`/responsible-person/${o.editedResponsiblePerson.internalId}`])})}}onResponsiblePersonDelete(){if(!this.responsiblePersonId)return;this.dialog.open(B).afterClosed().subscribe(o=>{o&&(this.store.dispatch(r.deleteByIid({responsiblePersonIid:this.responsiblePersonId})),this.actions$.pipe(c(r.deleteByIidSuccess),m(1)).subscribe(()=>{this.router.navigate(["/"])}))})}ngOnDestroy(){this.routeSubscription&&this.routeSubscription.unsubscribe(),this.responsiblePersonSubscription&&this.responsiblePersonSubscription.unsubscribe()}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=f({type:n,selectors:[["app-edit-responsible-person"]],decls:9,vars:4,consts:[[3,"formGroup"],[1,"form-container"],["nz-icon","","nzType","delete","nzTheme","outline",2,"color","red",3,"click"],["label","Felel\u0151s szem\xE9ly neve","controlName","responsiblePersonName",3,"form"],["label","Tev\xE9keny\xE9sig enged\xE9ly sz\xE1ma","controlName","responsiblePersonLicense",3,"form"],["mat-raised-button","","color","primary","type","submit",3,"click","disabled"]],template:function(o,s){o&1&&(p(0,"form",0)(1,"div",1)(2,"h3"),u(3," Felel\u0151s szem\xE9ly adatai "),p(4,"span",2),d("click",function(){return s.onResponsiblePersonDelete()}),a()(),h(5,"app-input-text-field",3)(6,"app-input-text-field",4),p(7,"button",5),d("click",function(){return s.submitForm()}),u(8," Felel\u0151s szem\xE9ly m\xF3dos\xEDt\xE1sa "),a()()()),o&2&&(t("formGroup",s.editResponsiblePersonForm),l(5),t("form",s.editResponsiblePersonForm),l(),t("form",s.editResponsiblePersonForm),l(),t("disabled",s.editResponsiblePersonForm.invalid))},dependencies:[P,k,N,y,v,S,I,L,$,G,A,_,T,V,M,R],encapsulation:2})}}return n})();export{ue as EditResponsiblePersonComponent};
