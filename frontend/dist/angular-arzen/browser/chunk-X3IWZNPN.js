import{a as h}from"./chunk-U46X7I6M.js";import{a as ee,b as te}from"./chunk-HLLI7ISJ.js";import{a as Z}from"./chunk-7TH4NNSA.js";import{b as oe}from"./chunk-6FC2SBBV.js";import{a as H,b as K}from"./chunk-MJU3WAKM.js";import{b as ie,c as se}from"./chunk-DFB7EGM7.js";import{g as L,k as Q,l as U,n as W,o as X,s as Y}from"./chunk-DERFXW54.js";import{d as l,h as R,j as _,k as B,m as V,r as w,s as $,t as O}from"./chunk-HBLQJYI7.js";import{f as j,g as J}from"./chunk-ACJFTGJR.js";import"./chunk-VB5AKFTQ.js";import{h as z,i as D}from"./chunk-DYBTKUOF.js";import"./chunk-XXPNPBJG.js";import"./chunk-4ZDK5ED3.js";import{I as q,P as G,Q as E,h as I,r as A,t as N}from"./chunk-GAFZRVCH.js";import{$b as x,Ea as y,Eb as k,Fa as S,Kb as M,O as g,Sb as c,Yb as v,_b as F,ac as P,bc as n,cc as r,dc as f,hc as C,lc as a,mc as u,sa as d,sb as s,wc as m,yc as T}from"./chunk-32QSKDGA.js";function ce(o,b){if(o&1){let e=C();n(0,"mat-checkbox",5),a("change",function(){let t=y(e).$implicit,p=u(2);return S(p.toggleSubtype(t))}),m(1),r()}if(o&2){let e=b.$implicit,i=u(2);c("checked",i.pesticideSubtypes.value.includes(e)),s(),T(" ",e," ")}}function ne(o,b){if(o&1&&(f(0,"mat-divider"),n(1,"div",13),x(2,ce,2,2,"mat-checkbox",14,F),r()),o&2){let e=u();s(2),P(e.insecticides)}}function re(o,b){if(o&1){let e=C();n(0,"mat-checkbox",5),a("change",function(){let t=y(e).$implicit,p=u(2);return S(p.toggleSubtype(t))}),m(1),r()}if(o&2){let e=b.$implicit,i=u(2);c("checked",i.pesticideSubtypes.value.includes(e)),s(),T(" ",e," ")}}function de(o,b){if(o&1&&(f(0,"mat-divider"),n(1,"div",13),x(2,re,2,2,"mat-checkbox",14,F),r()),o&2){let e=u();s(2),P(e.rodenticides)}}var we=(()=>{class o{constructor(){this.formBuilder=d(w),this.store=d(q),this.actions$=d(G),this.router=d(N),this.route=d(A),this.pesticideId=null,this.pesticideService=d(oe),this.insecticides=[],this.rodenticides=[],this.dialog=d(H)}ngOnInit(){this.initializeForms(),this.routeSubscription=this.route.paramMap.subscribe(e=>{this.pesticideId=e.get("pesticideId")}),this.store.dispatch(h.loadByIid({iid:this.pesticideId})),this.pesticide$=this.store.select(Z),this.pesticideSubscription=this.pesticide$.subscribe(e=>{if(e){this.editPesticideForm.patchValue({pesticideName:e.pesticideName,pesticideType:e.pesticideType,pesticideSubstance1:e.pesticideSubstance1,pesticideSubstance2:e.pesticideSubstance2,pesticideSubstance3:e.pesticideSubstance3,pesticideSubstance4:e.pesticideSubstance4,pesticideAntidote1:e.pesticideAntidote1,pesticideAntidote2:e.pesticideAntidote2});let i=this.pesticideSubtypes;i.clear(),e.pesticideSubtypes.forEach(t=>{i.push(new _(t))})}})}initializeForms(){this.insecticides=this.pesticideService.insecticides,this.rodenticides=this.pesticideService.rodenticides,this.editPesticideForm=this.formBuilder.group({pesticideName:["",[l.required]],pesticideType:["",[l.required]],pesticideSubtypes:this.formBuilder.array([],[l.required]),pesticideSubstance1:["",[l.required]],pesticideSubstance2:[""],pesticideSubstance3:[""],pesticideSubstance4:[""],pesticideAntidote1:["",[l.required]],pesticideAntidote2:[""]})}get pesticideName(){return this.editPesticideForm.get("pesticideName")}get pesticideType(){return this.editPesticideForm.get("pesticideType")}get pesticideSubtypes(){return this.editPesticideForm.get("pesticideSubtypes")}get pesticideSubstance1(){return this.editPesticideForm.get("pesticideSubstance1")}get pesticideSubstance2(){return this.editPesticideForm.get("pesticideSubstance2")}get pesticideSubstance3(){return this.editPesticideForm.get("pesticideSubstance3")}get pesticideSubstance4(){return this.editPesticideForm.get("pesticideSubstance4")}get pesticideAntidote1(){return this.editPesticideForm.get("pesticideAntidote1")}get pesticideAntidote2(){return this.editPesticideForm.get("pesticideAntidote2")}selectPesticideType(e){this.pesticideType.value===e?(this.pesticideType.setValue(""),this.pesticideSubtypes.clear()):(this.pesticideType.setValue(e),this.pesticideSubtypes.clear())}toggleSubtype(e){let i=this.pesticideSubtypes,t=i.value.indexOf(e);t===-1?i.push(new _(e)):i.removeAt(t)}addSubtype(e){let i=this.pesticideSubtypes;i.value.includes(e)||i.push(new _(e))}submitForm(){if(this.editPesticideForm.valid){let e={pesticideName:this.pesticideName.value,pesticideType:this.pesticideType.value,pesticideSubtypes:this.pesticideSubtypes.value,pesticideSubstance1:this.pesticideSubstance1.value,pesticideSubstance2:this.pesticideSubstance2.value,pesticideSubstance3:this.pesticideSubstance3.value,pesticideSubstance4:this.pesticideSubstance4.value,pesticideAntidote1:this.pesticideAntidote1.value,pesticideAntidote2:this.pesticideAntidote2.value};this.store.dispatch(h.edit({pesticideToEdit:e,pesticideIid:this.pesticideId})),this.actions$.pipe(E(h.editSuccess),g(1)).subscribe(i=>{this.router.navigate([`/pesticide/${i.editedPesticide.internalId}`])})}}onPesticideDelete(){if(!this.pesticideId)return;this.dialog.open(K).afterClosed().subscribe(i=>{i&&(this.store.dispatch(h.deleteByIid({pesticideIid:this.pesticideId})),this.actions$.pipe(E(h.deleteByIidSuccess),g(1)).subscribe(()=>{this.router.navigate(["/"])}))})}ngOnDestroy(){this.routeSubscription&&this.routeSubscription.unsubscribe(),this.pesticideSubscription&&this.pesticideSubscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=k({type:o,selectors:[["app-edit-pesticide"]],decls:21,vars:13,consts:[[3,"formGroup"],[1,"form-container"],["nz-icon","","nzType","delete","nzTheme","outline",2,"color","red",3,"click"],["label","C\xE9gn\xE9v","controlName","pesticideName",3,"form"],[1,"checkbox-container"],["labelPosition","before",3,"change","checked"],["label","Hat\xF3anyag","controlName","pesticideSubstance1",3,"form"],["label","Hat\xF3anyag #2","controlName","pesticideSubstance2",3,"form"],["label","Hat\xF3anyag #3","controlName","pesticideSubstance3",3,"form"],["label","Hat\xF3anyag #4","controlName","pesticideSubstance4",3,"form"],["label","Ellenszer","controlName","pesticideAntidote1",3,"form"],["label","Ellenszer #2","controlName","pesticideAntidote2",3,"form"],["mat-raised-button","","color","primary","type","submit",3,"click","disabled"],[1,"sub-checkbox-container"],["labelPosition","before",3,"checked"]],template:function(i,t){i&1&&(n(0,"form",0)(1,"div",1)(2,"h3"),m(3," Irt\xF3szer adatai "),n(4,"span",2),a("click",function(){return t.onPesticideDelete()}),r()(),f(5,"app-input-text-field",3),n(6,"div",4)(7,"mat-checkbox",5),a("change",function(){return t.selectPesticideType("R\xE1gcs\xE1l\xF3irt\xF3szer")}),m(8," R\xE1gcs\xE1l\xF3irt\xF3szer "),r(),n(9,"mat-checkbox",5),a("change",function(){return t.selectPesticideType("Rovarirt\xF3szer")}),m(10," Rovarirt\xF3szer "),r()(),M(11,ne,4,0)(12,de,4,0),f(13,"app-input-text-field",6)(14,"app-input-text-field",7)(15,"app-input-text-field",8)(16,"app-input-text-field",9)(17,"app-input-text-field",10)(18,"app-input-text-field",11),n(19,"button",12),a("click",function(){return t.submitForm()}),m(20," Irt\xF3szer m\xF3dos\xEDt\xE1sa "),r()()()),i&2&&(c("formGroup",t.editPesticideForm),s(5),c("form",t.editPesticideForm),s(2),c("checked",t.pesticideType.value==="R\xE1gcs\xE1l\xF3irt\xF3szer"),s(2),c("checked",t.pesticideType.value==="Rovarirt\xF3szer"),s(2),v(t.pesticideType.value==="Rovarirt\xF3szer"?11:-1),s(),v(t.pesticideType.value==="R\xE1gcs\xE1l\xF3irt\xF3szer"?12:-1),s(),c("form",t.editPesticideForm),s(),c("form",t.editPesticideForm),s(),c("form",t.editPesticideForm),s(),c("form",t.editPesticideForm),s(),c("form",t.editPesticideForm),s(),c("form",t.editPesticideForm),s(),c("disabled",t.editPesticideForm.invalid))},dependencies:[I,L,$,B,R,O,V,Q,U,W,X,J,j,Y,te,ee,D,z,se,ie],styles:[".checkbox-container[_ngcontent-%COMP%]{padding:0 0 16px 16px}.checkbox-container[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-right:20px}.sub-checkbox-container[_ngcontent-%COMP%]{padding:16px 0 16px 16px}.sub-checkbox-container[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-right:20px}"]})}}return o})();export{we as EditPesticideComponent};
